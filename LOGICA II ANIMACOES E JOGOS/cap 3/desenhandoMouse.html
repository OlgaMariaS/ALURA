<!DOCTYPE HTML>

<HTML lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>Alura</title>
</head>

<body>
    <canvas width="1000" height="600"></canvas> 
    <br>
    <h1> Escolha uma cor <input type="color"> </h1>
<script>
    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');
    //chamado o canvas e adicionado cor, textura ao pincel e a tela
    pincel.fillStyle = 'grey';
    pincel.fillRect(0, 0, 1000, 600);

    var desenha = false; //var auxiliar que inicia em falso
    var cor = document.querySelector ('input'); //var atribuida a cor escolhida

    function desenhaCirculo(evento) {

        if(desenha) {
            var x = evento.pageX - tela.offsetLeft;
            var y = evento.pageY - tela.offsetTop;
            pincel.fillStyle = cor.value; //pega a cor escolhida pelo usuario
            pincel.beginPath();
            pincel.arc(x, y, 10, 0, 2 * 3.14);
            pincel.fill(); //permite que o usuario desenha sem intermissoes com o pincel em formato redondo e cor escolhida
        }
        console.log(x + ',' + y);
    }

    tela.onmousemove = desenhaCirculo; //ao mover o mouse e desenhado

    function habilitaDesenhar() {

        desenha = true;
    }

    function desabilitaDesenhar() {

        desenha = false;
    }

    tela.onmousedown = habilitaDesenhar; // ao mexer o mouse desenha chamando a funcao habilita desenhar

    tela.onmouseup = desabilitaDesenhar; // com mouse parado para o desenho

</script>
</body>

</HTML>